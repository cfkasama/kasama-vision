-- 1. enum型を追加（まだ存在しない場合）
DO $$
BEGIN
  IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'commentkind') THEN
    CREATE TYPE "CommentKind" AS ENUM ('COMMENT', 'CHALLENGE', 'ACHIEVEMENT');
  END IF;
END$$;

-- 2. Commentテーブルにkindカラムを追加（デフォルトはCOMMENT）
ALTER TABLE "Comment"
  ADD COLUMN "kind" "CommentKind" NOT NULL DEFAULT 'COMMENT';